<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>„Åæ„Åï„Å≤„Å®„Ç¨„ÉÅ„É£ÔºÜÂãïÁîª</title>
  <style>
    body {
      font-family: sans-serif;
      background: #222;
      color: #fff;
      text-align: center;
      padding: 2em;
    }
    button {
      margin: 0.5em;
      padding: 0.5em 1em;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #666;
    }
    .section {
      display: none;
      margin-top: 2em;
    }
    video {
      width: 90%;
      max-width: 800px;
      border: 5px solid #fff;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.7);
      margin-top: 20px;
    }
    #pullArea {
      width: 150px;
      height: 150px;
      margin: 2em auto;
      background: url('daada.PNG') no-repeat center center;
      background-size: cover;
      border-radius: 50%;
      font-size: 0;
      user-select: none;
      touch-action: none;
      cursor: grab;
      transition: transform 0.1s;
      position: relative;
    }
    #pullMessage {
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 20px;
      font-weight: bold;
      animation: blink 1s infinite alternate, scaleBounce 1s infinite alternate;
      pointer-events: none;
    }
    @keyframes blink {
      from { opacity: 1; }
      to { opacity: 0.4; }
    }
    @keyframes scaleBounce {
      from { transform: translate(-50%, -50%) scale(1); }
      to { transform: translate(-50%, -50%) scale(1.2); }
    }
    #effect {
      width: 100%;
      height: 200px;
      background: rgba(255, 215, 0, 0.5);
      display: none;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    img {
      max-width: 90%;
      margin-top: 1em;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    #result {
      font-size: 22px;
      margin-top: 1em;
      font-weight: bold;
    }
    .SSR { color: gold; }
    .SR  { color: violet; }
    .R   { color: lightblue; }
    .N   { color: lightgray; }
  </style>
</head>
<body>
  <h1>„Åæ„Åï„Å≤„Å®„Ç¨„ÉÅ„É£ÔºÜÂãïÁîª</h1>
  <button id="switchButton" onclick="toggleSection()">‚ñ∂ ÂãïÁîª„Éö„Éº„Ç∏„Å∏</button>

  <!-- „Ç¨„ÉÅ„É£„Çª„ÇØ„Ç∑„Éß„É≥ -->
  <div id="gacha" class="section">
    <div id="pullArea">
      <div id="pullMessage">‰∏ã„Å´„Å≤„Å£„Å±„ÇåÔºÅ</div>
    </div>
    <div id="effect"></div>
    <div id="result"></div>
    <div id="images"></div>
  </div>

  <!-- ÂãïÁîª„Çª„ÇØ„Ç∑„Éß„É≥ -->
  <div id="video" class="section">
    <video controls>
      <source src="masa001.mp4" type="video/mp4">
      „Åä‰Ωø„ÅÑ„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØÂãïÁîª„Çø„Ç∞„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ
    </video>
  </div>

  <script>
    let currentSection = 'gacha';

    function showSection(section) {
      document.getElementById('gacha').style.display = (section === 'gacha') ? 'block' : 'none';
      document.getElementById('video').style.display = (section === 'video') ? 'block' : 'none';
      const button = document.getElementById('switchButton');
      if (section === 'gacha') {
        button.textContent = '‚ñ∂ ÂãïÁîª„Éö„Éº„Ç∏„Å∏';
      } else {
        button.textContent = '‚ñ∂ „Ç¨„ÉÅ„É£„Éö„Éº„Ç∏„Å∏';
      }
      currentSection = section;
    }

    function toggleSection() {
      if (currentSection === 'gacha') {
        showSection('video');
      } else {
        showSection('gacha');
      }
    }

    // ÂàùÊúüË°®Á§∫„ÅØ„Ç¨„ÉÅ„É£
    showSection('gacha');

    // „Ç¨„ÉÅ„É£„É≠„Ç∏„ÉÉ„ÇØ
    const gachaPool = [
      { name: "kkkk", rarity: "SSR", image: "kkkk.PNG", chance: 2 },
      { name: "masa", rarity: "SSR", image: "masa.PNG", chance: 2 },
      { name: "„Åì„Çå„ÅØ„ÅÑ„ÅÑ„Åæ„Åï", rarity: "SSR", image: "„Åì„Çå„ÅØ„ÅÑ„ÅÑ„Åæ„Åï.PNG", chance: 1 },
      { name: "hs", rarity: "SR", image: "hs.PNG", chance: 4 },
      { name: "uyikl", rarity: "SR", image: "uyikl.PNG", chance: 4 },
      { name: "zsdfg", rarity: "SR", image: "zsdfg.PNG", chance: 4 },
      { name: "dgghsdhash", rarity: "SR", image: "dgghsdhash.PNG", chance: 4 },
      { name: "af", rarity: "R", image: "af.PNG", chance: 7 },
      { name: "ag", rarity: "R", image: "ag.PNG", chance: 7 },
      { name: "wrtj", rarity: "R", image: "wrtj.PNG", chance: 7 },
      { name: "qqq", rarity: "R", image: "qqq.PNG", chance: 7 },
      { name: "rth", rarity: "R", image: "rth.PNG", chance: 7 },
      { name: "sssss", rarity: "R", image: "sssss.PNG", chance: 7 },
      { name: "adadada", rarity: "N", image: "adadada.PNG", chance: 15 },
      { name: "adadadada", rarity: "N", image: "adadadada.PNG", chance: 15 },
      { name: "daada", rarity: "N", image: "daada.PNG", chance: 15 },
      { name: "juu", rarity: "N", image: "juu.PNG", chance: 15 },
      { name: "yjwryjwryj", rarity: "N", image: "yjwryjwryj.PNG", chance: 15 }
    ];

    let startY = 0;
    let pullDistance = 0;
    const threshold = 80;
    const pullArea = document.getElementById("pullArea");
    const pullMessage = document.getElementById("pullMessage");

    function getY(e) {
      return e.touches ? e.touches[0].clientY : e.clientY;
    }

    function onStart(e) {
      startY = getY(e);
      if (e.type === "mousedown") {
        document.addEventListener("mousemove", onMove);
        document.addEventListener("mouseup", onEnd);
      } else {
        document.addEventListener("touchmove", onMove);
        document.addEventListener("touchend", onEnd);
      }
    }

    function onMove(e) {
      const currentY = getY(e);
      pullDistance = currentY - startY;
      if (pullDistance > 0) {
        const scale = 1 + Math.min(pullDistance / 150, 0.5);
        pullArea.style.transform = `scaleY(${scale})`;
        pullMessage.textContent = "Âºï„Å£„Å±„Çä‰∏≠‚Ä¶";
      }
    }

    function onEnd(e) {
      pullArea.style.transform = `scaleY(1)`;

      if (pullDistance > threshold) {
        pullMessage.textContent = "„Åæ„Åï„Å≤„Å®Áô∫ÂãïÔºÅ";
        startGacha();
      } else {
        pullMessage.textContent = "„ÇÇ„Å£„Å®Âº∑„ÅèÂºï„Å£„Å±„Å£„Å¶ÔºÅ";
      }
      pullDistance = 0;

      document.removeEventListener("mousemove", onMove);
      document.removeEventListener("mouseup", onEnd);
      document.removeEventListener("touchmove", onMove);
      document.removeEventListener("touchend", onEnd);
    }

    function startGacha() {
      const effect = document.getElementById("effect");
      const result = document.getElementById("result");
      const images = document.getElementById("images");

      effect.style.display = "block";
      result.textContent = "";
      images.innerHTML = "";

      setTimeout(() => {
        effect.style.display = "none";

        let rand = Math.random() * 100;
        let total = 0;
        let selected;

        for (let item of gachaPool) {
          total += item.chance;
          if (rand < total) {
            selected = item;
            break;
          }
        }

        result.innerHTML = `üéâ ${selected.name} „ÅåÂá∫„ÅüÔºÅÔºà${selected.rarity}Ôºâ`;
        result.className = selected.rarity;

        const img = document.createElement("img");
        img.src = selected.image;
        images.appendChild(img);

        pullMessage.textContent = "‰∏ã„Å´„Å≤„Å£„Å±„ÇåÔºÅ";
      }, 2000);
    }

    pullArea.addEventListener("mousedown", onStart);
    pullArea.addEventListener("touchstart", onStart);
  </script>
</body>
</html>
