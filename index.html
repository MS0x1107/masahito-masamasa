<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ã¾ã•ã²ã¨ã‚¬ãƒãƒ£</title>
  <style>
    body { font-family: sans-serif; background: #222; color: #fff; text-align: center; padding: 2em; }
    button { margin: 0.5em; padding: 0.5em 1em; background: #444; color: #fff; border: none; border-radius: 8px; cursor: pointer; }
    button:hover { background: #666; }
    .section { display: none; }
    img, video { max-width: 90%; margin-top: 1em; border-radius: 12px; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
    .SSR { color: gold; }
    .SR  { color: violet; }
    .R   { color: lightblue; }
    .N   { color: lightgray; }
  </style>
</head>
<body>
  <h1 id="pageTitle">ã¾ã•ã²ã¨ã‚¬ãƒãƒ£</h1>
  <button id="switchButton" onclick="toggleSection()">â–¶ å‹•ç”»ãƒšãƒ¼ã‚¸ã¸</button>

  <!-- ã‚¬ãƒãƒ£ãƒšãƒ¼ã‚¸ -->
  <div id="gacha" class="section">
    <div id="pullArea" style="width:150px; height:150px; margin:2em auto; background:url('daada.PNG') no-repeat center center; background-size:cover; border-radius:50%; cursor:grab; position:relative;">
      <div id="pullMessage" style="position:absolute; top:60%; left:50%; transform:translate(-50%,-50%); font-size:20px; font-weight:bold; animation:blink 1s infinite alternate, scaleBounce 1s infinite alternate; pointer-events:none;">ä¸‹ã«ã²ã£ã±ã‚Œï¼</div>
    </div>
    <div id="effect" style="width:100%; height:200px; background:rgba(255,215,0,0.5); display:none; animation:spin 1s linear infinite;"></div>
    <div id="result" style="font-size:22px; margin-top:1em; font-weight:bold;"></div>
    <div id="images"></div>
  </div>

  <!-- å‹•ç”»ãƒšãƒ¼ã‚¸ -->
  <div id="video" class="section">
    <h2>å‹•ç”»ä¸€è¦§</h2>
    <div id="videoList"></div>
  </div>

  <script>
    const gachaPool = [
      { name: "ã‹ã‚ã„ã„ã¾ã•ã²ã¨", rarity: "SSR", image: "ã‹ã‚ã„ã„ã¾ã•ã²ã¨.PNG", chance: 2 },
      { name: "ã“ã‚Œã¯ã„ã„ã¾ã•", rarity: "SSR", image: "ã“ã‚Œã¯ã„ã„ã¾ã•.PNG", chance: 2 },
      { name: "æ„Ÿã˜ã¦ã‚‹ã¾ã•ã²ã¨", rarity: "SSR", image: "æ„Ÿã˜ã¦ã‚‹ã¾ã•ã²ã¨.PNG", chance: 2 },
      { name: "èª°ã¨ã‚‚ä»²è‰¯ããªã„ã¾ã•ã²ã¨", rarity: "SR", image: "èª°ã¨ã‚‚ä»²è‰¯ããªã„ã¾ã•ã²ã¨.PNG", chance: 4 },
      { name: "èŒ¶è‰²ã„ã¾ã•ã²ã¨", rarity: "SR", image: "èŒ¶è‰²ã„ã¾ã•ã²ã¨.PNG", chance: 4 },
      { name: "æœ€å‰åˆ—ã¾ã•ã²ã¨", rarity: "SR", image: "æœ€å‰åˆ—ã¾ã•ã²ã¨.PNG", chance: 4 },
      { name: "ã‚­ãƒ£ãƒ™ãƒ„ã‚€ã—ã‚ƒã‚€ã—ã‚ƒã¾ã•ã²ã¨", rarity: "SR", image: "ã‚­ãƒ£ãƒ™ãƒ„ã‚€ã—ã‚ƒã‚€ã—ã‚ƒã¾ã•ã²ã¨.PNG", chance: 4 },
      { name: "ã‚­ã‚¹ã¾ã•ã²ã¨", rarity: "SR", image: "ã‚­ã‚¹ã¾ã•ã²ã¨.PNG", chance: 4 },
      { name: "ãƒ˜ãƒ«ãƒ¡ãƒƒãƒˆã¾ã•ã²ã¨", rarity: "R", image: "ãƒ˜ãƒ«ãƒ¡ãƒƒãƒˆã¾ã•ã²ã¨.PNG", chance: 7 },
      { name: "å¼±è™«ãƒšãƒ€ãƒ«ãªã¾ã•ã²ã¨", rarity: "R", image: "å¼±è™«ãƒšãƒ€ãƒ«ãªã¾ã•ã²ã¨.PNG", chance: 7 },
      { name: "ä¸‰åˆ†ã®ä¸€ã¾ã•ã²ã¨", rarity: "R", image: "ä¸‰åˆ†ã®ä¸€ã¾ã•ã²ã¨.PNG", chance: 7 },
      { name: "ä½œã‚Šç¬‘é¡”ã¾ã•ã²ã¨", rarity: "R", image: "ä½œã‚Šç¬‘é¡”ã¾ã•ã²ã¨.PNG", chance: 7 },
      { name: "é™°ã‚­ãƒ£ã¾ã•ã²ã¨", rarity: "R", image: "é™°ã‚­ãƒ£ã¾ã•ã²ã¨.PNG", chance: 7 },
      { name: "é£Ÿã¹ç‰©ã§éŠã¶ã¾ã•ã²ã¨", rarity: "R", image: "é£Ÿã¹ç‰©ã§éŠã¶ã¾ã•ã²ã¨.PNG", chance: 7 },
      { name: "ãƒã‚µãƒ¼", rarity: "R", image: "ãƒã‚µãƒ¼.jpg", chance: 7 },
      { name: "ã«ã£ã“ã‚Šã¾ã•ã²ã¨", rarity: "R", image: "ã«ã£ã“ã‚Šã¾ã•ã²ã¨.jpg", chance: 7 },
      { name: "100å‡ã§ã‚¤ã‚­ã‚‹ã¾ã•ã²ã¨", rarity: "N", image: "100å‡ã§ã‚¤ã‚­ã‚‹ã¾ã•ã²ã¨.jpg", chance: 15 },
      { name: "MacBookã¾ã•ã²ã¨", rarity: "N", image: "MacBookã¾ã•ã²ã¨.PNG", chance: 15 },
      { name: "ãã£ã—ã‚‡ã„ã¾ã•ã²ã¨", rarity: "N", image: "ãã£ã—ã‚‡ã„ã¾ã•ã²ã¨.PNG", chance: 15 },
      { name: "ãã‚‚ã„ã¾ã•ã²ã¨", rarity: "N", image: "ãã‚‚ã„ã¾ã•ã²ã¨.jpg", chance: 15 },
      { name: "ã‚¤ã£ã¦ã‚‹ã¾ã•ã²ã¨", rarity: "N", image: "ã‚¤ã£ã¦ã‚‹ã¾ã•ã²ã¨.jpg", chance: 15 },
      { name: "ãƒ–ã‚µã‚¤ã‚¯ãªã¾ã•ã²ã¨", rarity: "N", image: "ãƒ–ã‚µã‚¤ã‚¯ãªã¾ã•ã²ã¨.jpg", chance: 15 },
      { name: "å‡›ã€…ã—ã„ã¾ã•ã²ã¨ã„", rarity: "N", image: "å‡›ã€…ã—ã„ã¾ã•ã²ã¨ã„.png", chance: 15 },
      { name: "æ™®é€šã«è€ã‘ã¦ã‚‹ã¾ã•ã²ã¨", rarity: "N", image: "æ™®é€šã«è€ã‘ã¦ã‚‹ã¾ã•ã²ã¨.jpg", chance: 15 },
      { name: "é’æ˜¥ã¾ã•ã²ã¨", rarity: "N", image: "é’æ˜¥ã¾ã•ã²ã¨.jpg", chance: 15 },
      { name: "å…ˆç”Ÿã¨ã¾ã•ã²ã¨", rarity: "N", image: "å…ˆç”Ÿã¨ã¾ã•ã²ã¨.PNG", chance: 15 }
    ];

    const videoFiles = [
      "masa001.mp4", "masa002.mp4", "masa003.mp4", "masa004.mp4", "masa005.mp4",
      "masa006.mp4", "masa007.mp4", "masa008.mp4", "masa009.mp4", "masa010.mp4",
      "masa011.mp4", "masa012.mp4", "masa013.mp4", "masa014.mp4", "masa015.mp4",
      "masa016.mp4", "masa017.mp4", "masa018.mp4", "masa019.mp4", "masa020.mp4",
      "masa021.mp4", "masa022.mp4", "masa023.mp4", "masa024.mp4"
    ];

    // åˆ‡ã‚Šæ›¿ãˆå‡¦ç†
    let currentSection = 'gacha';
    function showSection(section) {
      document.getElementById('gacha').style.display = (section === 'gacha') ? 'block' : 'none';
      document.getElementById('video').style.display = (section === 'video') ? 'block' : 'none';
      document.getElementById('pageTitle').textContent = (section === 'gacha') ? 'ã¾ã•ã²ã¨ã‚¬ãƒãƒ£' : 'ã¾ã•ã²ã¨å‹•ç”»';
      document.getElementById('switchButton').textContent = (section === 'gacha') ? 'â–¶ å‹•ç”»ãƒšãƒ¼ã‚¸ã¸' : 'â–¶ ã‚¬ãƒãƒ£ãƒšãƒ¼ã‚¸ã¸';
      currentSection = section;
    }
    function toggleSection() {
      showSection(currentSection === 'gacha' ? 'video' : 'gacha');
    }

    // åˆæœŸè¡¨ç¤º
    showSection('gacha');

    // å‹•ç”»ä¸€è¦§ä½œæˆ
    const videoList = document.getElementById('videoList');
    videoFiles.forEach(file => {
      const vid = document.createElement('video');
      vid.src = file;
      vid.controls = true;
      vid.style.margin = '1em';
      videoList.appendChild(vid);
    });

    // ã‚¬ãƒãƒ£å‡¦ç†
    let startY = 0;
    let pullDistance = 0;
    const threshold = 80;
    const pullArea = document.getElementById("pullArea");
    const pullMessage = document.getElementById("pullMessage");

    function getY(e) { return e.touches ? e.touches[0].clientY : e.clientY; }
    function onStart(e) {
      startY = getY(e);
      if (e.type === "mousedown") {
        document.addEventListener("mousemove", onMove);
        document.addEventListener("mouseup", onEnd);
      } else {
        document.addEventListener("touchmove", onMove);
        document.addEventListener("touchend", onEnd);
      }
    }
    function onMove(e) {
      const currentY = getY(e);
      pullDistance = currentY - startY;
      if (pullDistance > 0) {
        const scale = 1 + Math.min(pullDistance / 150, 0.5);
        pullArea.style.transform = `scaleY(${scale})`;
        pullMessage.textContent = "å¼•ã£ã±ã‚Šä¸­â€¦";
      }
    }
    function onEnd(e) {
      pullArea.style.transform = `scaleY(1)`;
      if (pullDistance > threshold) {
        pullMessage.textContent = "ã¾ã•ã²ã¨ç™ºå‹•ï¼";
        startGacha();
      } else {
        pullMessage.textContent = "ã‚‚ã£ã¨å¼·ãå¼•ã£ã±ã£ã¦ï¼";
      }
      pullDistance = 0;
      document.removeEventListener("mousemove", onMove);
      document.removeEventListener("mouseup", onEnd);
      document.removeEventListener("touchmove", onMove);
      document.removeEventListener("touchend", onEnd);
    }

    function startGacha() {
      const effect = document.getElementById("effect");
      const result = document.getElementById("result");
      const images = document.getElementById("images");
      effect.style.display = "block";
      result.textContent = "";
      images.innerHTML = "";
      setTimeout(() => {
        effect.style.display = "none";
        let rand = Math.random() * 100;
        let total = 0;
        let selected;
        for (let item of gachaPool) {
          total += item.chance;
          if (rand < total) { selected = item; break; }
        }
        result.innerHTML = `ğŸ‰ ${selected.name} ãŒå‡ºãŸï¼ï¼ˆ${selected.rarity}ï¼‰`;
        result.className = selected.rarity;
        const img = document.createElement("img");
        img.src = selected.image;
        images.appendChild(img);
        pullMessage.textContent = "ä¸‹ã«ã²ã£ã±ã‚Œï¼";
      }, 2000);
    }

    pullArea.addEventListener("mousedown", onStart);
    pullArea.addEventListener("touchstart", onStart);
  </script>
</body>
</html>
