<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>„Åæ„Åï„Å≤„Å®„Ç¨„ÉÅ„É£</title>
  <style>
    body {
      font-family: sans-serif;
      background: #222;
      color: #fff;
      text-align: center;
      padding: 2em;
    }
    button {
      margin: 0.5em;
      padding: 0.5em 1em;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #666;
    }
    #pullArea {
      width: 150px;
      height: 150px;
      margin: 2em auto;
      background: url('daada.PNG') no-repeat center center;
      background-size: cover;
      border-radius: 50%;
      position: relative;
      cursor: grab;
    }
    #pullMessage {
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 20px;
      font-weight: bold;
      animation: blink 1s infinite alternate, scaleBounce 1s infinite alternate;
      pointer-events: none;
    }
    @keyframes blink {
      from { opacity: 1; }
      to { opacity: 0.4; }
    }
    @keyframes scaleBounce {
      from { transform: translate(-50%, -50%) scale(1); }
      to { transform: translate(-50%, -50%) scale(1.2); }
    }
    #effect {
      width: 100%;
      height: 200px;
      background: rgba(255, 215, 0, 0.5);
      display: none;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    img {
      max-width: 90%;
      margin-top: 1em;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    #result {
      font-size: 22px;
      margin-top: 1em;
      font-weight: bold;
    }
    .SSR { color: gold; }
    .SR  { color: violet; }
    .R   { color: lightblue; }
    .N   { color: lightgray; }
  </style>
</head>
<body>
  <h1>„Åæ„Åï„Å≤„Å®„Ç¨„ÉÅ„É£</h1>
  <div id="pullArea">
    <div id="pullMessage">‰∏ã„Å´„Å≤„Å£„Å±„ÇåÔºÅ</div>
  </div>
  <div id="effect"></div>
  <div id="result"></div>
  <div id="images"></div>

  <script>
    const gachaPool = [
      { name: "„Åã„Çè„ÅÑ„ÅÑ„Åæ„Åï„Å≤„Å®", rarity: "SSR", image: "„Åã„Çè„ÅÑ„ÅÑ„Åæ„Åï„Å≤„Å®.PNG", chance: 2 },
      { name: "„Åì„Çå„ÅØ„ÅÑ„ÅÑ„Åæ„Åï", rarity: "SSR", image: "„Åì„Çå„ÅØ„ÅÑ„ÅÑ„Åæ„Åï.PNG", chance: 2 },
      { name: "ÊÑü„Åò„Å¶„Çã„Åæ„Åï„Å≤„Å®", rarity: "SSR", image: "ÊÑü„Åò„Å¶„Çã„Åæ„Åï„Å≤„Å®.PNG", chance: 2 },

      { name: "Ë™∞„Å®„ÇÇ‰ª≤ËâØ„Åè„Å™„ÅÑ„Åæ„Åï„Å≤„Å®", rarity: "SR", image: "Ë™∞„Å®„ÇÇ‰ª≤ËâØ„Åè„Å™„ÅÑ„Åæ„Åï„Å≤„Å®.PNG", chance: 4 },
      { name: "Ëå∂Ëâ≤„ÅÑ„Åæ„Åï„Å≤„Å®", rarity: "SR", image: "Ëå∂Ëâ≤„ÅÑ„Åæ„Åï„Å≤„Å®.PNG", chance: 4 },
      { name: "ÊúÄÂâçÂàó„Åæ„Åï„Å≤„Å®", rarity: "SR", image: "ÊúÄÂâçÂàó„Åæ„Åï„Å≤„Å®.PNG", chance: 4 },
      { name: "„Ç≠„É£„Éô„ÉÑ„ÇÄ„Åó„ÇÉ„ÇÄ„Åó„ÇÉ„Åæ„Åï„Å≤„Å®", rarity: "SR", image: "„Ç≠„É£„Éô„ÉÑ„ÇÄ„Åó„ÇÉ„ÇÄ„Åó„ÇÉ„Åæ„Åï„Å≤„Å®.PNG", chance: 4 },
      { name: "„Ç≠„Çπ„Åæ„Åï„Å≤„Å®", rarity: "SR", image: "„Ç≠„Çπ„Åæ„Åï„Å≤„Å®.PNG", chance: 4 },

      { name: "„Éò„É´„É°„ÉÉ„Éà„Åæ„Åï„Å≤„Å®", rarity: "R", image: "„Éò„É´„É°„ÉÉ„Éà„Åæ„Åï„Å≤„Å®.PNG", chance: 7 },
      { name: "Âº±Ëô´„Éö„ÉÄ„É´„Å™„Åæ„Åï„Å≤„Å®", rarity: "R", image: "Âº±Ëô´„Éö„ÉÄ„É´„Å™„Åæ„Åï„Å≤„Å®.PNG", chance: 7 },
      { name: "‰∏âÂàÜ„ÅÆ‰∏Ä„Åæ„Åï„Å≤„Å®", rarity: "R", image: "‰∏âÂàÜ„ÅÆ‰∏Ä„Åæ„Åï„Å≤„Å®.PNG", chance: 7 },
      { name: "‰Ωú„ÇäÁ¨ëÈ°î„Åæ„Åï„Å≤„Å®", rarity: "R", image: "‰Ωú„ÇäÁ¨ëÈ°î„Åæ„Åï„Å≤„Å®.PNG", chance: 7 },
      { name: "Èô∞„Ç≠„É£„Åæ„Åï„Å≤„Å®", rarity: "R", image: "Èô∞„Ç≠„É£„Åæ„Åï„Å≤„Å®.PNG", chance: 7 },
      { name: "È£ü„ÅπÁâ©„ÅßÈÅä„Å∂„Åæ„Åï„Å≤„Å®", rarity: "R", image: "È£ü„ÅπÁâ©„ÅßÈÅä„Å∂„Åæ„Åï„Å≤„Å®.PNG", chance: 7 },
      { name: "„Éû„Çµ„Éº", rarity: "R", image: "„Éû„Çµ„Éº.jpg", chance: 7 },
      { name: "„Å´„Å£„Åì„Çä„Åæ„Åï„Å≤„Å®", rarity: "R", image: "„Å´„Å£„Åì„Çä„Åæ„Åï„Å≤„Å®.jpg", chance: 7 },

      { name: "100Âùá„Åß„Ç§„Ç≠„Çã„Åæ„Åï„Å≤„Å®", rarity: "N", image: "100Âùá„Åß„Ç§„Ç≠„Çã„Åæ„Åï„Å≤„Å®.jpg", chance: 15 },
      { name: "MacBook„Åæ„Åï„Å≤„Å®", rarity: "N", image: "MacBook„Åæ„Åï„Å≤„Å®.PNG", chance: 15 },
      { name: "„Åç„Å£„Åó„Çá„ÅÑ„Åæ„Åï„Å≤„Å®", rarity: "N", image: "„Åç„Å£„Åó„Çá„ÅÑ„Åæ„Åï„Å≤„Å®.PNG", chance: 15 },
      { name: "„Åç„ÇÇ„ÅÑ„Åæ„Åï„Å≤„Å®", rarity: "N", image: "„Åç„ÇÇ„ÅÑ„Åæ„Åï„Å≤„Å®.jpg", chance: 15 },
      { name: "„Ç§„Å£„Å¶„Çã„Åæ„Åï„Å≤„Å®", rarity: "N", image: "„Ç§„Å£„Å¶„Çã„Åæ„Åï„Å≤„Å®.jpg", chance: 15 },
      { name: "„Éñ„Çµ„Ç§„ÇØ„Å™„Åæ„Åï„Å≤„Å®", rarity: "N", image: "„Éñ„Çµ„Ç§„ÇØ„Å™„Åæ„Åï„Å≤„Å®.jpg", chance: 15 },
      { name: "Âáõ„ÄÖ„Åó„ÅÑ„Åæ„Åï„Å≤„Å®„ÅÑ", rarity: "N", image: "Âáõ„ÄÖ„Åó„ÅÑ„Åæ„Åï„Å≤„Å®„ÅÑ.png", chance: 15 },
      { name: "ÊôÆÈÄö„Å´ËÄÅ„Åë„Å¶„Çã„Åæ„Åï„Å≤„Å®", rarity: "N", image: "ÊôÆÈÄö„Å´ËÄÅ„Åë„Å¶„Çã„Åæ„Åï„Å≤„Å®.jpg", chance: 15 },
      { name: "ÈùíÊò•„Åæ„Åï„Å≤„Å®", rarity: "N", image: "ÈùíÊò•„Åæ„Åï„Å≤„Å®.jpg", chance: 15 },
      { name: "ÂÖàÁîü„Å®„Åæ„Åï„Å≤„Å®", rarity: "N", image: "ÂÖàÁîü„Å®„Åæ„Åï„Å≤„Å®.PNG", chance: 15 }
    ];

    let startY = 0;
    let pullDistance = 0;
    const threshold = 80;
    const pullArea = document.getElementById("pullArea");
    const pullMessage = document.getElementById("pullMessage");

    function getY(e) {
      return e.touches ? e.touches[0].clientY : e.clientY;
    }

    function onStart(e) {
      startY = getY(e);
      if (e.type === "mousedown") {
        document.addEventListener("mousemove", onMove);
        document.addEventListener("mouseup", onEnd);
      } else {
        document.addEventListener("touchmove", onMove);
        document.addEventListener("touchend", onEnd);
      }
    }

    function onMove(e) {
      const currentY = getY(e);
      pullDistance = currentY - startY;
      if (pullDistance > 0) {
        const scale = 1 + Math.min(pullDistance / 150, 0.5);
        pullArea.style.transform = `scaleY(${scale})`;
        pullMessage.textContent = "Âºï„Å£„Å±„Çä‰∏≠‚Ä¶";
      }
    }

    function onEnd(e) {
      pullArea.style.transform = `scaleY(1)`;

      if (pullDistance > threshold) {
        pullMessage.textContent = "„Åæ„Åï„Å≤„Å®Áô∫ÂãïÔºÅ";
        startGacha();
      } else {
        pullMessage.textContent = "„ÇÇ„Å£„Å®Âº∑„ÅèÂºï„Å£„Å±„Å£„Å¶ÔºÅ";
      }
      pullDistance = 0;

      document.removeEventListener("mousemove", onMove);
      document.removeEventListener("mouseup", onEnd);
      document.removeEventListener("touchmove", onMove);
      document.removeEventListener("touchend", onEnd);
    }

    function startGacha() {
      const effect = document.getElementById("effect");
      const result = document.getElementById("result");
      const images = document.getElementById("images");

      effect.style.display = "block";
      result.textContent = "";
      images.innerHTML = "";

      setTimeout(() => {
        effect.style.display = "none";

        let rand = Math.random() * 100;
        let total = 0;
        let selected;

        for (let item of gachaPool) {
          total += item.chance;
          if (rand < total) {
            selected = item;
            break;
          }
        }

        result.innerHTML = `üéâ ${selected.name} „ÅåÂá∫„ÅüÔºÅÔºà${selected.rarity}Ôºâ`;
        result.className = selected.rarity;

        const img = document.createElement("img");
        img.src = selected.image;
        images.appendChild(img);

        pullMessage.textContent = "‰∏ã„Å´„Å≤„Å£„Å±„ÇåÔºÅ";
      }, 2000);
    }

    pullArea.addEventListener("mousedown", onStart);
    pullArea.addEventListener("touchstart", onStart);
  </script>
</body>
</html>
